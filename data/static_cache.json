{
    "all_workflows": {
        "percent_cvg_cutoff": 0.90,
        "neg_percent_cvg_cutoff": 0.3,
        "avg_depth_cutoff": 0.75,
        "col_func_map": {
            "pcr_run_date": [
                "format_date",
                "pcr_run_date"
            ],
            "wgs_run_date": [
                "wgs_run_date"
            ],
            "wgs_run_date_var": [
                "parse_seq_id",
                "date"
            ],
            "date_recd": [
                "format_date",
                "date_recd"
            ],
            "f_name": [
                "format_f_name"
            ],
            "l_name": [
                "format_l_name",
                "not_real_l_names"
            ],
            "age": [
                "get_age"
            ],
            "doc": [
                "format_date",
                "doc"
            ],
            "dob": [
                "format_date",
                "dob"
            ],
            "sex": [
                "format_sex"
            ],
            "neg_ctrl_lot": [
                "neg_ctrl_lot"
            ],
            "neg_ctrl_exp": [
                "neg_ctrl_exp"
            ],
            "pos_ctrl_lot": [
                "pos_ctrl_lot"
            ],
            "pos_ctrl_exp": [
                "pos_ctrl_exp"
            ],
            "state": [
                "format_state",
                "state_abbrev"
            ],
            "facility": [
                "format_facility",
                "facility_replace_dict"
            ],
            "facility_category": [
                "parse_category",
                "parse_category_dict"
            ],
            "source": [
                "format_source"
            ],
            "race": [
                "format_race"
            ],
            "platform": [
                "platform"
            ],
            "machine_num": [
                "machine_num"
            ],
            "machine_num_var": [
                "parse_seq_id",
                "m_num"
            ],
            "day_run_num": [
                "day_run_num"
            ],
            "day_run_num_var": [
                "parse_seq_id",
                "run_num"
            ],
            "hsn": [
                "parse_seq_id",
                "hsn"
            ],
            "priority_spec": [
                "get_priority",
                "priority_lst"
            ],
            "position": [
                "parse_seq_id",
                "pos"
            ],
            "path_to_fasta": [
                "parse_path",
                "path"
            ],
            "nextclade_version": [
                "get_today"
            ],
            "pos_pass": [
                "pos_ctrl_pass"
            ],
            "neg_pass": [
                "neg_ctrl_pass"
            ],
            "reportable": [
                "check_reportable",
                "percent_cvg_cutoff"
            ],
            "Lab": [
                "lab"
            ],
            "Performing_Lab": [
                "p_lab"
            ],
            "Report_Sent_Date": [
                "get_today"
            ],
            "submitter": [
                "user"
            ],
            "fn": [
                "filepath"
            ],
            "covv_virus_name": [
                "get_virus_name"
            ],
            "covv_type": [
                "covv_type"
            ],
            "covv_passage": [
                "covv_passage"
            ],
            "covv_collection_date": [
                "get_collection_date"
            ],
            "covv_location": [
                "get_location"
            ],
            "covv_add_location": [
                "unknown"
            ],
            "covv_host": [
                "host"
            ],
            "covv_add_host_info": [
                "unknown"
            ],
            "covv_gender": [
                "get_sex"
            ],
            "covv_patient_status": [
                "unknown"
            ],
            "covv_specimen": [
                "unknown"
            ],
            "covv_outbreak": [
                "unknown"
            ],
            "covv_last_vaccinated": [
                "unknown"
            ],
            "covv_treatment": [
                "unknown"
            ],
            "covv_seq_technology": [
                "seq_tech"
            ],
            "covv_assembly_method": [
                "assembly_method"
            ],
            "covv_orig_lab": [
                "lab_name"
            ],
            "covv_orig_lab_addr": [
                "lab_addr"
            ],
            "covv_provider_sample_id": [
                "unknown"
            ],
            "covv_subm_lab": [
                "lab_name"
            ],
            "covv_subm_lab_addr": [
                "lab_addr"
            ],
            "covv_subm_sample_id": [
                "unknown"
            ],
            "covv_authors": [
                "authors"
            ]
        }
    },
    "workflow1": {
        "state_abbrev": {
            "AL": "Alabama",
            "AK": "Alaska",
            "AZ": "Arizona",
            "AR": "Arkansas",
            "CA": "California",
            "CO": "Colorado",
            "CT": "Connecticut",
            "DE": "Delaware",
            "DC": "District of Columbia",
            "FL": "Florida",
            "GA": "Georgia",
            "HI": "Hawaii",
            "ID": "Idaho",
            "IL": "Illinois",
            "IN": "Indiana",
            "IA": "Iowa",
            "KS": "Kansas",
            "KY": "Kentucky",
            "LA": "Louisiana",
            "ME": "Maine",
            "MD": "Maryland",
            "MA": "Massachusetts",
            "MI": "Michigan",
            "MN": "Minnesota",
            "MS": "Mississippi",
            "MO": "Missouri",
            "MT": "Montana",
            "NE": "Nebraska",
            "NV": "Nevada",
            "NH": "New Hampshire",
            "NJ": "New Jersey",
            "NM": "New Mexico",
            "NY": "New York",
            "NC": "North Carolina",
            "ND": "North Dakota",
            "OH": "Ohio",
            "OK": "Oklahoma",
            "PA": "Pennsylvania",
            "PR": "Puerto Rico",
            "RI": "Rhode Island",
            "SC": "South Carolina",
            "SD": "South Dakota",
            "TN": "Tennessee",
            "TX": "Texas",
            "UT": "Utah",
            "VT": "Vermont",
            "VA": "Virginia",
            "WA": "Washington",
            "WV": "West Virginia",
            "WI": "Wisconsin",
            "WY": "Wyoming"
        },
        "facility_replace_dict": {
            "community health center": "CHC",
            "comm hlth ctr": "CHC",
            "comm health ctr": "CHC",
            "comm health center": "CHC",
            "health department": "HD",
            "health dept": "HD",
            "hlth dept": "HD",
            "health clinic": "Hlth Clinic",
            "medical center": "Med Ctr",
            "med center": "Med Ctr",
            "medical ctr": "Med Ctr",
            "health center": "Hlth Ctr",
            "health ctr": "Hlth Ctr",
            "hlth center": "Hlth Ctr",
            "correctional facility": "Corr Fac",
            "corr facility": "Corr Fac",
            "correctional fac": "Corr Fac",
            "memorial hospital": "Mem Hosp",
            "mem hospital": "Mem Hosp",
            "memorial hosp": "Mem Hosp",
            "community": "Comm",
            "county": "Co",
            "hospital": "Hosp",
            "regional": "Reg",
            "medical": "Med",
            "kansas juvenile correctional complex": "kjcc"
        },
        "parse_category_dict": {
            "hosp": "Hospital",
            "med ctr": "Hospital",
            "corr fac": "Correctional Facility",
            "detention unit": "Correctional Facility",
            "jail": "Correctional Facility",
            "kjcc": "Correctional Facility",
            "hd": "Health Department",
            "school": "School",
            "hlth ctr": "Health Center",
            "chc": "Health Center",
            "clinic": "Clinic",
            "lab": "Laboratory",
            "fire dept": "Fire Department",
            "resort": "Resort"
        },
        "format_source_dict": {
            "nasopharyngeal": "NP",
            "nasal mid-turbinate": "NM",
            "oropharyngeal": "OP",
            "pooled": "PNPOP",
            "bronchoalveolar lavage": "AL",
            "nasal anterior nares": "AN",
            "nasopharyngeal aspirate": "NA",
            "sputum": "SP",
            "serum": "SE",
            "saliva": "SA",
            "lower respiratory": "AE",
            "lung aspirate": "AE",
            "other": "OT"
        },
        "demo_names": {
            "HSN": "hsn",
            "STATE": "state",
            "DOB": "dob",
            "REPORT_DATE": "pcr_run_date",
            "RECEIVE_DATE": "date_recd",
            "COLLECT_DATE": "doc",
            "CUST_ID": "facility_id",
            "NAME": "name",
            "COUNTY": "county",
            "GENDER": "sex",
            "RAC": "race",
            "CHOICE_DESC": "Ethnicity",
            "MATRIX": "source",
            "CUST_NAME": "facility"
        },
        "not_real_l_names": [
            "jr", 
            "Jr.",
            "Sr.",
            "Sr",
            "Jr",
            "jr.",
            "sr.",
            "sr",
            "i",
            "ii", 
            "iii", 
            "iv", 
            "v", 
            "vi", 
            "vii", 
            "viii", 
            "ix", 
            "x", 
            "xi", 
            "xii"
        ],
        "sample_data_col_order": [
            "hsn",
            "race",
            "facility",
            "county",
            "state",
            "dob",
            "age",
            "sex",
            "f_name",
            "l_name",
            "Ethnicity",
            "wgs_run_date",
            "pcr_run_date",
            "date_recd",
            "doc",
            "facility_id",
            "facility_category",
            "source",
            "priority_spec"
        ],
        "add_col_lst": [
            "pcr_run_date",
            "wgs_run_date",
            "date_recd",
            "f_name",
            "l_name",
            "age",
            "doc",
            "dob",
            "sex",
            "state",
            "facility",
            "facility_category",
            "source",
            "race",
            "priority_spec"
        ],
        "read_query_tbl1": [
            "SELECT hsn",
            "FROM dbo.Results",
            "WHERE hsn IN {hsn_query}"
        ],
        "write_query_tbl1":[
            "UPDATE dbo.Results",
            "SET race = '{1}',",
            "facility = '{2}',",
            "county = '{3}',",
            "state = '{4}',",
            "dob = CAST('{5}' AS DATE),",
            "age = {6},",
            "sex = '{7}',",
            "f_name = '{8}',",
            "l_name = '{9}',",
            "Ethnicity = '{10}',",
            "wgs_run_date = CAST('{11}' AS DATE),",
            "pcr_run_date = CAST('{12}' AS DATE),",
            "date_recd = CAST('{13}' AS DATE),",
            "doc = CAST('{14}' AS DATE),",
            "facility_id = {15},",
            "facility_category = '{16}',",
            "source = '{17}',",
            "priority_spec = {18}",
            "WHERE hsn = {0}",
            "IF @@ROWCOUNT=0",
            "INSERT INTO dbo.Results (hsn, race, facility, county, state, dob, age, sex, f_name, l_name, Ethnicity, wgs_run_date, pcr_run_date, date_recd, doc, facility_id, facility_category, source, priority_spec) VALUES",
            "({0}, '{1}', '{2}', '{3}', '{4}', CAST('{5}' AS DATE), {6}, '{7}', '{8}', '{9}', '{10}', CAST('{11}' AS DATE), CAST('{12}' AS DATE), CAST('{13}' AS DATE), CAST('{14}' AS DATE), {15}, '{16}', '{17}', {18})"
        ]
    },
    "workflow2": {
        "df_qc_cols": [
            "hsn",
            "platform",
            "machine_num",
            "position",
            "day_run_num",
            "percent_cvg",
            "avg_depth",
            "wgs_run_date",
            "pos_pass",
            "neg_pass",
            "neg_ctrl_lot",
            "neg_ctrl_exp",
            "pos_ctrl_lot",
            "pos_ctrl_exp"
        ],
        "df_results_cols": [
            "hsn",
            "avg_depth",
            "percent_cvg",
            "pos_pass",
            "neg_pass",
            "wgs_run_date",
            "reportable"
        ],
        "write_query_tbl1": [
            "UPDATE dbo.Results",
            "SET avg_depth = {1}, percent_cvg = {2}, wgs_run_date = CAST('{5}' AS DATE), reportable = {6}",
            "WHERE (hsn = {0} AND percent_cvg IS NULL AND avg_depth IS NULL AND reportable IS NULL)",
            "OR (hsn = {0} AND percent_cvg < {2} AND {1} >= {avg_depth_cutoff} AND {6} = 1)",
            "OR (hsn = {0} AND {6} = 1 AND {1} >= {avg_depth_cutoff} AND reportable = 0)"
        ],
        "add_col_lst": [
            "platform",
            "machine_num",
            "day_run_num",
            "percent_cvg",
            "avg_depth",
            "wgs_run_date",
            "neg_ctrl_lot",
            "neg_ctrl_exp",
            "pos_ctrl_lot",
            "pos_ctrl_exp"
        ],
        "add_col_lst_ctrl": [
            "pos_pass",
            "neg_pass",
            "reportable"
        ]
    },
    "workflow3": {
        "write_query_tbl2": [
            "UPDATE dbo.Run_Stats",
            "SET path_to_fasta = '{5}'",
            "WHERE hsn = {0} AND wgs_run_date = CAST('{4}' AS DATE) AND machine_num = {1} AND position = {2} AND day_run_num = {3}"
        ],
        "add_col_lst": [
            "hsn",
            "machine_num_var",
            "position",
            "day_run_num_var",
            "wgs_run_date_var",
            "path_to_fasta"
        ]
    },
    "workflow4": {
        "rename_nc_cols_lst": {
            "totalMissing": "total_ns",
            "totalSubstitutions": "total_mutations",
            "totalAminoacidSubstitutions": "total_aa_changes",
            "aaSubstitutions": "aa_substitutions",
            "pcrPrimerChanges": "pcr_primer_changes",
            "qc.overallStatus": "qc_overall_status",
            "qc.snpClusters.status": "qc_snpclusters_status"
        },
        "full_lst": [
            "hsn",
            "wgs_run_date",
            "machine_num",
            "position",
            "day_run_num",
            "clade",
            "total_ns",
            "total_mutations",
            "total_aa_changes",
            "aa_substitutions",
            "pcr_primer_changes",
            "nextclade_version",
            "qc_snpclusters_status",
            "qc_overall_status"
        ],
        "nc_results_cols_lst": [
            "hsn",
            "wgs_run_date",
            "machine_num",
            "position",
            "day_run_num",
            "clade",
            "total_ns",
            "total_mutations",
            "total_aa_changes",
            "aa_substitutions",
            "pcr_primer_changes",
            "nextclade_version"
        ],
        "nc_qc_cols_lst": [
            "hsn",
            "wgs_run_date",
            "machine_num",
            "position",
            "day_run_num",
            "total_ns",
            "qc_snpclusters_status",
            "qc_overall_status"
        ],
        "add_col_lst": [
            "hsn",
            "machine_num_var",
            "position",
            "day_run_num_var",
            "wgs_run_date_var",
            "nextclade_version"
        ],
        "write_query_tbl2": [
            "UPDATE dbo.Run_Stats",
            "SET total_ns = {5}, qc_snpclusters_status = '{6}', qc_overall_status = '{7}'",
            "WHERE hsn = {0} AND wgs_run_date = CAST('{1}' AS DATE) AND machine_num = {2} AND position = {3} AND day_run_num = {4}"
        ],
        "write_query_tbl1": [
            "UPDATE results",
            "SET results.clade = '{1}', results.total_ns = {2}, results.total_mutations = {3}, results.total_aa_changes = {4}, results.aa_substitutions = '{5}', results.pcr_primer_changes = '{6}', results.nextclade_version = CAST('{7}' AS DATE), results.path_to_fasta ='{11}'",
            "FROM dbo.Results results",
            "WHERE (results.hsn = {0}",
            "AND results.clade IS NULL",
            "AND results.total_ns IS NULL",
            "AND results.total_mutations IS NULL",
            "AND results.total_aa_changes IS NULL",
            "AND results.aa_substitutions IS NULL",
            "AND results.pcr_primer_changes IS NULL",
            "AND results.nextclade_version IS NULL", 
            "AND results.path_to_fasta IS NULL)",
            "OR (results.hsn = {0}",
            "AND results.reportable = 1)"
        ],
        "read_query_tbl2": [
            "SELECT *",
            "FROM dbo.Run_Stats"
        ]
    },
    "workflow5": {
        "rename_po_cols_lst": {
            "taxon": "Sequence name",
            "Lineage": "lineage_id",
            "lineage": "lineage_id",
            "pangolin version": "pangolin_version",
            "pangoLEARN version": "pango_learn_version",
            "pangoLEARN_version": "pango_learn_version"
        },
        "full_lst": [
            "hsn",
            "wgs_run_date",
            "machine_num",
            "position",
            "day_run_num",
            "lineage_id",
            "pangolin_version",
            "pango_learn_version"
        ],
        "add_col_lst": [
            "hsn",
            "machine_num_var",
            "position",
            "day_run_num_var",
            "wgs_run_date_var"
        ],
        "write_query_tbl1": [
            "UPDATE results",
            "SET results.lineage_id = '{1}', results.pangolin_version = '{2}', results.pango_learn_version = CAST('{3}' AS DATE)",
            "FROM dbo.Results results",
            "WHERE (results.hsn = {0}",
            "AND results.lineage_id IS NULL",
            "AND results.pangolin_version IS NULL", 
            "AND results.pango_learn_version IS NULL)",
            "OR (results.hsn = {0}",
            "AND results.reportable = 1)"
        ],
        "read_query_tbl2": [
            "SELECT row.*",
            "FROM dbo.Run_Stats row",
            "INNER JOIN",
            "(SELECT hsn, MAX(percent_cvg) AS MaxPercentCoverage",
            "FROM dbo.Run_Stats",
            "GROUP BY hsn) grouped_row",
            "ON row.hsn = grouped_row.hsn",
            "AND row.percent_cvg = grouped_row.MaxPercentCoverage",
            "WHERE row.avg_depth >= {avg_depth_cutoff}"
        ]
    },
    "workflow6": {
        "lab": "Kansas Health and Environmental Lab",
        "p_lab": "Kansas Health and Environmental Lab",
        "rename_col_lst": {
            "hsn": "Accession_Number",
            "f_name": "Patient_First_Name",
            "l_name": "Patient_Last_Name",
            "dob": "Patient_DOB",
            "sex": "Patient_Gender",
            "facility": "Ordering_Facility",
            "clade": "Clade",
            "doc": "Specimen_Collection_Date",
            "source": "Specimen_Source",
            "wgs_run_date": "Test_Date",
            "lineage_id": "Lineage_ID",
            "gisaid_num": "GISAID_Number",
            "race": "Race",
            "ethnicity": "Ethnicity"
        },
        "csv_headers": [
            "Lab",
            "Patient_Last_Name",
            "Patient_First_Name",
            "Patient_DOB",
            "Patient_Gender",
            "Ordering_Facility",
            "Accession_Number",
            "Specimen_Collection_Date",
            "Specimen_Source",
            "Test_Date",
            "Lineage_ID",
            "Clade",
            "GISAID_Number",
            "Race",
            "Ethnicity",
            "Performing_Lab",
            "Report_Sent_Date"
        ],
        "bad_df_headers": [
            "hsn",
            "percent_cvg",
            "avg_depth",
            "total_ns", 
            "pos_pass", 
            "neg_pass", 
            "clade",
            "lineage_id", 
            "facility", 
            "f_name", 
            "l_name", 
            "sex", 
            "age", 
            "dob"
        ],
        "read_date_query_tbl1": [
            "SELECT results.reportable, results.f_name, results.l_name, results.dob, results.sex, results.facility, results.hsn, results.doc, results.source, results.wgs_run_date, results.lineage_id, results.clade, results.gisaid_num, results.race, results.Ethnicity",
            "FROM dbo.Results results",
            "WHERE results.wgs_run_date >= CAST('{start}' AS DATE)",
            "AND results.wgs_run_date <= CAST('{end}' AS DATE)",
            "AND results.lineage_id IS NOT NULL",
            "AND results.clade IS NOT NULL",
            "AND results.f_name IS NOT NULL",
            "AND results.l_name IS NOT NULL",
            "AND results.dob IS NOT NULL",
            "AND results.facility IS NOT NULL",
            "AND results.doc IS NOT NULL",
            "AND results.reportable {reportable}",
            "AND results.percent_cvg >= {percent_cvg_cutoff}"
        ],
        "read_bad_date_query_tbl1":[
            "SELECT *",
            "FROM dbo.Results results",
            "INNER JOIN",
            "(SELECT hsn, pos_pass, neg_pass",
            "FROM dbo.Run_Stats) qc",
            "ON results.hsn = qc.hsn",
            "WHERE results.wgs_run_date >= CAST('{start}' AS DATE)",
            "AND results.wgs_run_date <= CAST('{end}' AS DATE)",
            "AND results.f_name IS NOT NULL",
            "AND results.l_name IS NOT NULL",
            "AND results.dob IS NOT NULL",
            "AND results.facility IS NOT NULL",
            "AND results.doc IS NOT NULL",
            "AND results.percent_cvg < {percent_cvg_cutoff}"
        ],
        "read_sdate_query_tbl1":[
            "SELECT results.f_name, results.l_name, results.dob, results.sex, results.facility, results.hsn, results.doc, results.source, results.wgs_run_date, results.lineage_id, results.clade, results.gisaid_num, results.race, results.Ethnicity",
            "FROM dbo.Results results",
            "INNER JOIN",
            "(SELECT hsn, pos_pass, neg_pass",
            "FROM dbo.Run_Stats) qc",
            "ON results.hsn = qc.hsn",
            "WHERE results.date_submitted >= '{start}'",
            "AND results.date_submitted <= '{end}'",
            "AND results.lineage_id IS NOT NULL",
            "AND results.clade IS NOT NULL",
            "AND results.f_name IS NOT NULL",
            "AND results.l_name IS NOT NULL",
            "AND results.dob IS NOT NULL",
            "AND results.facility IS NOT NULL",
            "AND results.doc IS NOT NULL",
            "AND results.percent_cvg >= {percent_cvg_cutoff}"
        ],
        "read_facility_query_tbl1": [
            "SELECT results.f_name, results.l_name, results.dob, results.sex, results.facility, results.hsn, results.doc, results.source, results.wgs_run_date, results.lineage_id, results.clade, results.gisaid_num, results.race, results.Ethnicity",
            "FROM dbo.Results results",
            "INNER JOIN",
            "(SELECT hsn, pos_pass, neg_pass",
            "FROM dbo.Run_Stats) qc",
            "ON results.hsn = qc.hsn",
            "WHERE results.facility = '{facility}'",
            "AND results.lineage_id IS NOT NULL",
            "AND results.clade IS NOT NULL",
            "AND results.f_name IS NOT NULL",
            "AND results.l_name IS NOT NULL",
            "AND results.dob IS NOT NULL",
            "AND results.doc IS NOT NULL",
            "AND results.dob IS NOT NULL",
            "AND results.reportable = {reportable}",
            "AND results.percent_cvg >= {percent_cvg_cutoff}"
        ],
        "read_bad_facility_query_tbl1": [
            "SELECT results.f_name, results.l_name, results.dob, results.sex, results.facility, results.hsn, results.doc, results.source, results.wgs_run_date, results.lineage_id, results.clade, results.gisaid_num, results.race, results.Ethnicity",
            "FROM dbo.Results results",
            "INNER JOIN",
            "(SELECT hsn, pos_pass, neg_pass",
            "FROM dbo.Run_Stats) qc",
            "ON results.hsn = qc.hsn",
            "WHERE results.facility = '{facility}'",
            "AND results.lineage_id IS NOT NULL",
            "AND results.clade IS NOT NULL",
            "AND results.f_name IS NOT NULL",
            "AND results.l_name IS NOT NULL",
            "AND results.dob IS NOT NULL",
            "AND results.doc IS NOT NULL",
            "AND results.dob IS NOT NULL",
            "AND results.percent_cvg < {percent_cvg_cutoff}"
        ],
        "read_sfacility_query_tbl1": [
            "SELECT results.f_name, results.l_name, results.dob, results.sex, results.facility, results.hsn, results.doc, results.source, results.wgs_run_date, results.lineage_id, results.clade, results.gisaid_num, results.race, results.Ethnicity",
            "FROM dbo.Results results",
            "WHERE results.submitting_lab = '{sub_lab}'",
            "AND results.lineage_id IS NOT NULL",
            "AND results.clade IS NOT NULL",
            "AND results.f_name IS NOT NULL",
            "AND results.l_name IS NOT NULL",
            "AND results.dob IS NOT NULL",
            "AND results.facility IS NOT NULL",
            "AND results.doc IS NOT NULL",
            "AND results.dob IS NOT NULL",
            "AND results.percent_cvg >= {percent_cvg_cutoff}"
        ],
        "read_bad_sfacility_query_tbl1": [
            "SELECT results.f_name, results.l_name, results.dob, results.sex, results.facility, results.hsn, results.doc, results.source, results.wgs_run_date, results.lineage_id, results.clade, results.gisaid_num, results.race, results.Ethnicity",
            "FROM dbo.Results results",
            "WHERE results.submitting_lab = '{sub_lab}'",
            "AND results.lineage_id IS NOT NULL",
            "AND results.clade IS NOT NULL",
            "AND results.f_name IS NOT NULL",
            "AND results.l_name IS NOT NULL",
            "AND results.dob IS NOT NULL",
            "AND results.facility IS NOT NULL",
            "AND results.doc IS NOT NULL",
            "AND results.dob IS NOT NULL",
            "AND results.percent_cvg < {percent_cvg_cutoff}"
        ],
        "read_all_query_tbl1": [
            "SELECT *",
            "FROM dbo.Results"
        ],
        "read_bad_all_query_tbl1": [
            "SELECT *",
            "FROM dbo.Results",
            "WHERE 1=0"
        ]
    },
    "workflow7": {},
    "workflow8": {},
    "workflow9": {
        "read_query_tbl1": [
            "SELECT results.hsn, results.path_to_fasta, results.wgs_run_date",
            "FROM dbo.Results results",
            "INNER JOIN",
            "(SELECT hsn, pos_pass, neg_pass",
            "FROM dbo.Run_Stats) qc",
            "ON results.hsn = qc.hsn",
            "WHERE results.path_to_fasta IS NOT NULL",
            "AND results.percent_cvg >= {percent_cvg_cutoff}",
            "AND qc.pos_pass = 1",
            "AND qc.neg_pass = 1"
        ]
    },
    "epi_isl": {
        "rename_epi_isl_cols_lst": {
            "Accession ID": "gisaid_epi_isl"
        },
        "full_lst": [
            "gisaid_num",
            "gisaid_epi_isl"
        ],
        "write_query_tbl1": [
            "UPDATE dbo.Results",
            "SET gisaid_epi_isl = '{1}'",
            "WHERE gisaid_num = {0}"
        ]
    },
    "gisaid": {
        "default_comment": "baseline surveillance",
        "priority_comment": "unknown",
        "covv_type": "betacoronavirus",
        "covv_passage": "Original",
        "unknown": "unknown",
        "host":"Human",
        "seq_tech":"BIP_Wv7",
        "rename_gisaid_cols_lst": {
            "age": "covv_patient_age",
            "avg_depth": "covv_coverage"
        },
        "state_abbrev": {
            "Alabama": "AL",
            "Alaska": "AK",
            "Arizona": "AZ",
            "Arkansas": "AR",
            "California": "CA",
            "Colorado": "CO",
            "Connecticut": "CT",
            "Delaware": "DE",
            "District of Columbia": "DC",
            "Florida": "FL",
            "Georgia": "GA",
            "Hawaii": "HI",
            "Idaho": "ID",
            "Illinois": "IL",
            "Indiana": "IN",
            "Iowa": "IA",
            "Kansas": "KS",
            "Kentucky": "KY",
            "Louisiana": "LA",
            "Maine": "ME",
            "Maryland": "MD",
            "Massachusetts": "MA",
            "Michigan": "MI",
            "Minnesota": "MN",
            "Mississippi": "MS",
            "Missouri": "MO",
            "Montana": "MT",
            "Nebraska": "NE",
            "Nevada": "NV",
            "New Hampshire": "NH",
            "New Jersey": "NJ",
            "New Mexico": "NM",
            "New York": "NY",
            "North Carolina": "NC",
            "North Dakota": "ND",
            "Ohio": "OH",
            "Oklahoma": "OK",
            "Pennsylvania": "PA",
            "Puerto Rico": "PR",
            "Rhode Island": "RI",
            "South Carolina": "SC",
            "South Dakota": "SD",
            "Tennessee": "TN",
            "Texas": "TX",
            "Utah": "UT",
            "Vermont": "VT",
            "Virginia": "VA",
            "Washington": "WA",
            "West Virginia": "WV",
            "Wisconsin": "WI",
            "Wyoming": "WY"
        },
        "add_col_lst":[
            "hsn",
            "submitter",
            "fn",
            "covv_virus_name",
            "covv_type",
            "covv_passage",
            "covv_collection_date",
            "covv_location",
            "covv_add_location",
            "covv_host",
            "covv_add_host_info",
            "covv_sampling_strategy",
            "covv_gender",
            "covv_patient_status",
            "covv_specimen",
            "covv_outbreak",
            "covv_last_vaccinated",
            "covv_treatment",
            "covv_seq_technology",
            "covv_assembly_method",
            "covv_orig_lab",
            "covv_orig_lab_addr",
            "covv_provider_sample_id",
            "covv_subm_lab",
            "covv_subm_lab_addr",
            "covv_subm_sample_id",
            "covv_authors",
            "covv_comment",
            "comment_type"
        ],
        "full_gisaid_cols_lst": [
            "hsn",
            "submitter",
            "fn",
            "covv_virus_name",
            "covv_type",
            "covv_passage",
            "covv_collection_date",
            "covv_location",
            "covv_add_location",
            "covv_host",
            "covv_add_host_info",
            "covv_sampling_strategy",
            "covv_gender",
            "covv_patient_age",
            "covv_patient_status",
            "covv_specimen",
            "covv_outbreak",
            "covv_last_vaccinated",
            "covv_treatment",
            "covv_seq_technology",
            "covv_assembly_method",
            "covv_coverage",
            "covv_orig_lab",
            "covv_orig_lab_addr",
            "covv_provider_sample_id",
            "covv_subm_lab",
            "covv_subm_lab_addr",
            "covv_subm_sample_id",
            "covv_authors",
            "covv_comment",
            "comment_type"
        ],
        "read_query_tbl1_priority": [
            "SELECT hsn",
            "FROM dbo.Results",
            "WHERE priority_spec=1"
        ],
        "read_query_tbl1_max_gisaid": [
            "SELECT MAX(gisaid_num)",
            "FROM dbo.Results"
        ],
        "read_query_tbl1_eligible_hsn": [
            "SELECT results.hsn, results.reportable, results.wgs_run_date, results.percent_cvg, results.path_to_fasta, results.gisaid_num, results.gisaid_epi_isl, results.doc",
            "FROM dbo.Results results",
            "WHERE results.wgs_run_date >= '{prev_week}'",
            "AND results.percent_cvg >= {percent_cvg_cutoff} ",
            "AND results.path_to_fasta IS NOT NULL",
            "AND results.gisaid_num IS NULL",
            "AND results.gisaid_epi_isl IS NULL",
            "AND results.reportable {reportable}",
            "AND results.doc IS NOT NULL"
        ],
        "read_query_tbl1": [
            "SELECT *",
            "FROM dbo.Results",
            "WHERE hsn IN {hsn_query}"
        ],
        "write_query_tbl1": [
            "UPDATE dbo.Results",
            "SET gisaid_num = {1},",
            "priority_spec = {2}",
            "WHERE hsn = {0}"
        ]
    },
    "outside_lab": {
        "dbo_tbl_1_cols": [
            "hsn",
            "path_to_fasta",
            "gisaid_epi_isl",
            "gisaid_num",
            "clade",
            "lineage_id",
            "total_ns",
            "avg_depth",
            "percent_cvg",
            "race",
            "facility",
            "city",
            "county",
            "state",
            "dob",
            "age",
            "sex",
            "f_name",
            "l_name",
            "wgs_run_date",
            "Ethnicity",
            "pcr_run_date",
            "date_submitted",
            "submitting_lab",
            "date_recd",
            "doc",
            "facility_id",
            "facility_category",
            "source",
            "total_mutations",
            "total_aa_changes",
            "aa_substitutions",
            "pcr_primer_changes",
            "ct_n",
            "ct_orf",
            "pangolin_version",
            "nextclade_version",
            "pango_learn_version"
        ],
        "dbo_tbl_2_cols": [
            "hsn",
            "platform",
            "machine_num",
            "position",
            "day_run_num",
            "percent_cvg",
            "avg_depth",
            "total_ns",
            "qc_snpclusters_status",
            "qc_overall_status",
            "wgs_run_date",
            "path_to_fasta"
        ],
        "date_cols": [
            "dob",
            "wgs_run_date",
            "pcr_run_date",
            "date_submitted",
            "date_recd",
            "doc"
        ],
        "str_cols": [
            "facility",
            "city",
            "f_name",
            "l_name",
            "submitting_lab"
        ],
        "rename_dict": {
            "gisaid #": "gisaid_num",
            "seq run order": "seq_run_order",
            "seq run id": "seq_run_id",
            "clade": "clade",
            "lineage id": "lineage_id",
            "qc overallstatus": "qc_overall_status",
            "total ns": "total_ns",
            "seq coverage": "seq_coverage",
            "assembly coverage": "assembly_coverage",
            "facility": "facility",
            "city": "city",
            "state": "state",
            "wgs run date": "wgs_run_date",
            "pcr run date": "pcr_run_date",
            "date rec'd": "date_recd",
            "facility id": "facility_id",
            "facility category": "facility_category",
            "total mutations": "total_mutations",
            "total aa changes": "total_aa_changes",
            "aa substitutions": "aa_substitutions",
            "pcrprimerchanges": "pcr_primer_changes",
            "qc.snpclusters.status": "qc_snpclusters_status",
            "age range": "age_range",
            "ct n": "ct_n",
            "ct orf": "ct_orf",
            "aligned bases": "aligned_bases",
            "mean depth": "mean_depth",
            "mean base_q": "mean_base_q",
            "mean map_q": "mean_map_q",
            "ethnicity": "Ethnicity"
        },
        "write_query_tbl1": [
            "INSERT INTO dbo.Results {df_table_col_query} VALUES",
            "({0}, '{1}', '{2}', {3}, '{4}', '{5}', {6}, {7}, {8}, '{9}', '{10}', '{11}', '{12}', '{13}', CAST('{14}' AS DATE), {15}, '{16}', '{17}', '{18}', CAST('{19}' AS DATE), '{20}', CAST('{21}' AS DATE), CAST('{22}' AS DATE), '{23}', CAST('{24}' AS DATE), CAST('{25}' AS DATE), {26}, '{27}', '{28}', {29}, {30}, '{31}', '{32}', {33}, {34}, '{35}', CAST('{36}' AS DATE), CAST('{37}' AS DATE))"
        ],
        "write_query_tbl2": [
            "INSERT INTO dbo.Run_Stats {df_table_col_query} VALUES",
            "({0}, '{1}', {2}, {3}, {4}, {5}, {6}, {7}, '{8}', '{9}', CAST('{10}' AS DATE), '{11}')"
        ]
    },
    "plotter": {
        "cot_combine_cols":{
            "20H Beta": ["20H (Beta, V2)", "20H/501Y.V2"],
            "20I Alpha": ["20I", "20I (Alpha, V1)", "20I/501Y.V1"],
            "20J Gamma": ["20J", "20J (Gamma, V3)", "20J/501Y.V3"],
            "21A Delta": ["21A", "21A (Delta)"],
            "21H Mu": ["21H", "21H (Mu)"]
        },
        "lot_combine_cols":{
        },
        "ast_add_cols":{
            "L452R":["L452R"],
            "D614G":["D614G"],
            "E484K":["E484K"],
            "K417N":["K417N"],
            "K417T":["K417T"],
            "T478K":["T478K"],
            "R346K":["R346K"],
            "N501Y":["N501Y"],
            "L452R and E484Q":["L452R", "E484Q"],
            "K417N, E484K, and N501Y":["K417N", "E484K", "N501Y"],
            "K417T, E484K, and N501Y":["K417T", "E484K", "N501Y"],
            "K417N, L452R, and T478K":["K417N", "L452R", "T478K"],
            "R346K, E484K, and N501Y":["R346K", "E484K", "N501Y"]
        },
        "dot_add_cols":[

        ],
        "read_query_tbl1":[
            "SELECT *",
            "FROM dbo.Results",
            "WHERE doc >= '2021-01-01'",
            "AND percent_cvg >= {percent_cvg_cutoff}",
            "ORDER BY wgs_run_date"
        ]
    },
    "query": {
        "final_col_order": [
            "hsn",
            "gisaid_epi_isl",
            "gisaid_num",
            "clade",
            "lineage_id",
            "qc_overall_status",
            "total_ns",
            "avg_depth",
            "percent_cvg",
            "facility",
            "city",
            "county",
            "state",
            "dob",
            "age",
            "race",
            "Ethnicity",
            "sex",
            "f_name",
            "l_name",
            "wgs_run_date",
            "pcr_run_date",
            "date_submitted",
            "submitting_lab",
            "date_recd",
            "doc",
            "facility_id",
            "facility_category",
            "source",
            "total_mutations",
            "total_aa_changes",
            "aa_substitutions",
            "qc_snpclusters_status",
            "ct_n",
            "ct_orf",
            "pangolin_version",
            "pango_learn_version",
            "nextclade_version",
            "path_to_fasta"
        ],
        "valid_lst": [
            "doc",
            "all",
            "all_valid",
            "unique",
            "wgs_run_date",
            "dob",
            "date_recd",
            "hsn",
            "clade",
            "lineage_id",
            "min",
            "race",
            "facility",
            "county",
            "source"
        ],
        "date_options": [
            "doc",
            "wgs_run_date",
            "dob",
            "date_recd"
        ],
        "strtype": [
            "lineage_id",
            "clade",
            "facility",
            "source",
            "race",
            "county"
        ],
        "read_query_min": [
            "SELECT * FROM dbo.Results",
            "WHERE {1} >= {2} And avg_depth >= {4}"
        ],
        "read_query_date": [
            "SELECT * FROM dbo.Results",
            "WHERE {0} >= CAST('{1}' AS DATE) And {0} <= CAST('{2}' AS DATE)"
        ],
        "read_query_str": [
            "SELECT * FROM dbo.Results",
            "WHERE UPPER({0}) LIKE UPPER('%{1}%')"
        ],
        "read_query_unique": [
            "SELECT {1}, count(*)",
            "FROM dbo.Results",
            "WHERE {1} IS NOT NULL",
            "GROUP BY {1}"
        ],
        "read_query_all": [
            "SELECT *",
            "FROM dbo.Results"
        ],
        "read_query_all_valid": [
            "SELECT *",
            "FROM dbo.Results",
            "WHERE percent_cvg > {3}"
        ],
        "read_query_else": [
            "SELECT *",
            "FROM dbo.Results",
            "WHERE {0} = {1}"
        ],
        "read_query_merge_all": [
            "SELECT row.*",
            "FROM dbo.Run_Stats row",
            "INNER JOIN",
            "(SELECT hsn, MAX(percent_cvg) AS MaxPercentCoverage",
            "FROM dbo.Run_Stats",
            "GROUP BY hsn) grouped_row",
            "ON row.hsn = grouped_row.hsn",
            "AND row.percent_cvg = grouped_row.MaxPercentCoverage"
        ],
        "read_query_merge": [
            "SELECT row.*",
            "FROM dbo.Run_Stats row",
            "INNER JOIN",
            "(SELECT hsn, MAX(percent_cvg) AS MaxPercentCoverage",
            "FROM dbo.Run_Stats",
            "GROUP BY hsn) grouped_row",
            "ON row.hsn = grouped_row.hsn",
            "AND row.percent_cvg = grouped_row.MaxPercentCoverage",
            "WHERE row.avg_depth >= {4}"
        ]
    },
    "refresh": {
        "dbo_tbl_1_cols": [
            "hsn",
            "path_to_fasta",
            "gisaid_epi_isl",
            "gisaid_num",
            "clade",
            "lineage_id",
            "total_ns",
            "avg_depth",
            "percent_cvg",
            "race",
            "facility",
            "city",
            "county",
            "state",
            "dob",
            "age",
            "sex",
            "f_name",
            "l_name",
            "wgs_run_date",
            "Ethnicity",
            "pcr_run_date",
            "date_submitted",
            "submitting_lab",
            "date_recd",
            "doc",
            "facility_id",
            "facility_category",
            "source",
            "total_mutations",
            "total_aa_changes",
            "aa_substitutions",
            "pcr_primer_changes",
            "ct_n",
            "ct_orf",
            "pangolin_version",
            "nextclade_version",
            "pango_learn_version"
        ],
        "dbo_tbl_2_cols": [
            "hsn",
            "platform",
            "machine_num",
            "position",
            "day_run_num",
            "percent_cvg",
            "avg_depth",
            "total_ns",
            "qc_snpclusters_status",
            "qc_overall_status",
            "wgs_run_date",
            "path_to_fasta"
        ],
        "date_cols": [
            "dob",
            "wgs_run_date",
            "pcr_run_date",
            "date_submitted",
            "date_recd",
            "doc"
        ],
        "str_cols": [
            "facility",
            "city",
            "f_name",
            "l_name",
            "submitting_lab"
        ],
        "rename_dict": {
            "ethnicity": "Ethnicity"
        },
        "write_query_tbl1": [
            "INSERT INTO dbo.Results {df_table_col_query} VALUES",
            "({0}, '{1}', '{2}', {3}, '{4}', '{5}', {6}, {7}, {8}, '{9}', '{10}', '{11}', '{12}', '{13}', CAST('{14}' AS DATE), {15}, '{16}', '{17}', '{18}', CAST('{19}' AS DATE), '{20}', CAST('{21}' AS DATE), CAST('{22}' AS DATE), '{23}', CAST('{24}' AS DATE), CAST('{25}' AS DATE), {26}, '{27}', '{28}', {29}, {30}, '{31}', '{32}', {33}, {34}, '{35}', CAST('{36}' AS DATE), CAST('{37}' AS DATE))"
        ],
        "write_query_tbl2": [
            "INSERT INTO dbo.Run_Stats {df_table_col_query} VALUES",
            "({0}, '{1}', {2}, {3}, {4}, {5}, {6}, {7}, '{8}', '{9}', CAST('{10}' AS DATE), '{11}')"
        ]
    }
}
